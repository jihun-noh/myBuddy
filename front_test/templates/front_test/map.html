<html>
<head>
</head>
<body>
    <div id="map" style="width:500px;height:400px;"></div>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey={{app_key}}"></script>
    <script>

    var map;
    var markers = [];

    function getLocation() {
      if(navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(pos) {
          latitude = pos.coords.latitude;
          longitude = pos.coords.longitude;
        console.log("현재위치 - " + latitude + ' ' + longitude);
        }, function(error) {
          console.error(error);
          }, {
            enableHighAccuracy: false,
            maximumAge: 0,
            timeout: Infinity
          });
      }else {
        alert('GPS를 지원하지 않습니다');
      }
    }

    function initMap() {
      var container = document.getElementById('map'); //지도를 담을 영역의 DOM 레퍼런스
      var options = { //지도를 생성할 때 필요한 기본 옵션
        center: new kakao.maps.LatLng(33.450701, 126.570667), //지도의 중심좌표.
        level: 3 //지도의 레벨(확대, 축소 정도)
      };
      map = new kakao.maps.Map(container, options); //지도 생성 및 객체 리턴
      kakao.maps.event.addListener(map, 'click', function(mouseEvent) {
        addMarker(mouseEvent.latLng);
      });
    }

    function addMarker(latlng) {
      var marker = new kakao.maps.Marker()
      marker.setMap(map);
      marker.setPosition(latlng);
      markers.push(marker);
      console.log("addMarker - " + latlng);
      console.log(markers);
    }

    function deleteMarker() {
      
    }

    initMap();
    getLocation();

    </script>
</body>
</html>
